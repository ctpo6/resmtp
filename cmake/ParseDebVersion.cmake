MACRO(PARSE_DEB_VERSION PREFIX)
	set (changelog ${CMAKE_CURRENT_SOURCE_DIR}/debian/changelog)
#	message(status "Parsing debian changelog file ${changelog}")
	FILE (READ "${changelog}" DEBCHANGELOG)
	
	STRING (REGEX MATCH "([0-9]+\\.[0-9]+\\.[0-9]+)" DEBFULLVERSION "${DEBCHANGELOG}")
	STRING (REGEX REPLACE "([0-9]+)\\.([0-9]+)\\.([0-9]+)" "\\1;\\2;\\3" RESULTS "${DEBFULLVERSION}")
#	message(STATUS "DEBFULLVERSION = ${DEBFULLVERSION}")
	list(GET RESULTS 0 DEB_VERSION_MAJOR)
	list(GET RESULTS 1 DEB_VERSION_MINOR)
	list(GET RESULTS 2 DEB_VERSION_PATCH)
#	message(STATUS "DEB_VERSION_MAJOR = ${DEB_VERSION_MAJOR}")
#	message(STATUS "DEB_VERSION_MINOR = ${DEB_VERSION_MINOR}")
#	message(STATUS "DEB_VERSION_PATCH = ${DEB_VERSION_PATCH}")

	set(${PREFIX}_VERSION_MAJOR ${DEB_VERSION_MAJOR})
	set(${PREFIX}_VERSION_MINOR ${DEB_VERSION_MINOR})
	set(${PREFIX}_VERSION_PATCH ${DEB_VERSION_PATCH})
ENDMACRO(PARSE_DEB_VERSION)

